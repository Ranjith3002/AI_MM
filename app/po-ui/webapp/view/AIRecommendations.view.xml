<mvc:View
    controllerName="po.ui.controller.AIRecommendations"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    
    <Page
        id="aiRecommendationsPage"
        title="AI Recommendations"
        showNavButton="true"
        navButtonPress="onNavBack">
        
        <content>
            <VBox class="sapUiMediumMargin">
                <MessageStrip
                    text="AI-powered procurement insights and recommendations based on your data analysis."
                    type="Information"
                    showIcon="true"
                    class="sapUiMediumMarginBottom"/>

                <!-- AI Chat Interface -->
                <Panel headerText="Ask AI Assistant" class="sapUiMediumMarginBottom">
                    <content>
                        <VBox class="sapUiMediumMargin">
                            <HBox class="sapUiSmallMarginBottom">
                                <Input
                                    id="aiQuestionInput"
                                    placeholder="Ask me about costs, inventory, suppliers, or trends..."
                                    width="400px"
                                    class="sapUiTinyMarginEnd"/>
                                <Button
                                    text="Ask AI"
                                    type="Emphasized"
                                    icon="sap-icon://discussion-2"
                                    press="onAskAI"/>
                            </HBox>

                            <!-- Chat History -->
                            <VBox items="{ai>/chatHistory}" class="sapUiSmallMarginTop">
                                <HBox class="sapUiTinyMarginBottom">
                                    <Text text="{ai>type}" class="sapUiTinyMarginEnd"/>
                                    <Text text="({ai>timestamp})" class="sapUiTinyMarginEnd"/>
                                </HBox>
                                <Text text="{ai>message}" class="sapUiSmallMarginBottom"/>
                            </VBox>
                        </VBox>
                    </content>
                </Panel>

                <!-- AI Recommendations -->
                <Panel headerText="Smart Recommendations">
                    <content>
                        <List items="{ai>/recommendations}">
                            <CustomListItem>
                                <content>
                                    <HBox class="sapUiMediumMargin">
                                        <core:Icon src="{ai>icon}" size="2rem" class="sapUiMediumMarginEnd"/>
                                        <VBox class="sapUiNoMargin">
                                            <HBox>
                                                <Title text="{ai>title}" level="H4" class="sapUiTinyMarginEnd"/>
                                                <ObjectStatus text="{ai>type}" state="Information"/>
                                            </HBox>
                                            <Text text="{ai>description}" class="sapUiTinyMarginTop sapUiTinyMarginBottom"/>
                                            <HBox class="sapUiTinyMarginTop">
                                                <Text text="Confidence: {ai>confidence}%" class="sapUiTinyMarginEnd"/>
                                                <Button
                                                    text="Apply Recommendation"
                                                    type="Accept"
                                                    press="onApplyRecommendation"/>
                                            </HBox>
                                        </VBox>
                                    </HBox>
                                </content>
                            </CustomListItem>
                        </List>
                    </content>
                </Panel>
            </VBox>
        </content>
    </Page>
</mvc:View>
