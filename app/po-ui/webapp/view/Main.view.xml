<mvc:View
    controllerName="po.ui.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">

    <Page id="page" title="AI-Powered Procurement System" showNavButton="false">
        <content>
            <VBox class="sapUiMediumMargin">
                
                <!-- Simple Navigation -->
                <Panel headerText="Smart Procurement Dashboard" class="sapUiResponsiveMargin">
                    <content>
                        <VBox class="sapUiMediumMargin">
                            <Text text="Welcome to the AI-Powered Procurement System" class="sapUiMediumMarginBottom"/>
                            <HBox class="sapUiSmallMarginBottom">
                                <Button
                                    text="Material Dashboard"
                                    icon="sap-icon://product"
                                    type="Emphasized"
                                    press="onNavigateToMaterialDashboard"
                                    class="sapUiTinyMarginEnd"/>
                                <Button
                                    text="AI Recommendations"
                                    icon="sap-icon://lightbulb"
                                    type="Emphasized"
                                    press="onNavigateToAIRecommendations"
                                    class="sapUiTinyMarginEnd"/>
                                <Button
                                    text="Usage Trends"
                                    icon="sap-icon://trend-up"
                                    type="Emphasized"
                                    press="onNavigateToUsageTrends"
                                    class="sapUiTinyMarginEnd"/>
                                <Button
                                    text="Suggested POs"
                                    icon="sap-icon://lightbulb"
                                    type="Emphasized"
                                    press="onNavigateToSuggestedPOs"/>
                            </HBox>
                        </VBox>
                    </content>
                </Panel>
                
                <!-- Purchase Orders Table -->
                <Panel headerText="Purchase Orders" class="sapUiResponsiveMargin">
                    <headerToolbar>
                        <Toolbar>
                            <Title text="Purchase Orders" level="H2"/>
                            <ToolbarSpacer/>
                            <Button
                                text="Create Purchase Order"
                                type="Emphasized"
                                icon="sap-icon://add"
                                press="onCreatePO"/>
                        </Toolbar>
                    </headerToolbar>

                    <content>
                        <Table
                            id="table"
                            mode="SingleSelect"
                            items="{/PurchaseOrders}"
                            growing="true"
                            growingThreshold="20"
                            class="sapUiResponsiveContentPadding">

                            <headerToolbar>
                                <OverflowToolbar design="Transparent">
                                    <Title text="Purchase Orders List"/>
                                    <ToolbarSpacer/>
                                    <Button
                                        text="Export PDF"
                                        icon="sap-icon://pdf-attachment"
                                        press="onExportPDF"
                                        class="sapUiTinyMarginEnd"/>
                                    <Button
                                        text="Export Excel"
                                        icon="sap-icon://excel-attachment"
                                        press="onExportExcel"
                                        class="sapUiTinyMarginEnd"/>
                                    <Button
                                        text="Refresh"
                                        icon="sap-icon://refresh"
                                        press="onRefresh"/>
                                    <MenuButton
                                        text="Entity Dashboard"
                                        icon="sap-icon://database"
                                        buttonMode="Split"
                                        useDefaultActionOnly="false">
                                        <menu>
                                            <Menu>
                                                <items>
                                                    <MenuItem
                                                        text="Materials"
                                                        icon="sap-icon://product"
                                                        press="onViewEntity">
                                                        <customData>
                                                            <core:CustomData key="entity" value="Materials"/>
                                                        </customData>
                                                    </MenuItem>
                                                    <MenuItem
                                                        text="Suppliers"
                                                        icon="sap-icon://supplier"
                                                        press="onViewEntity">
                                                        <customData>
                                                            <core:CustomData key="entity" value="Suppliers"/>
                                                        </customData>
                                                    </MenuItem>
                                                    <MenuItem
                                                        text="Purchase Orders"
                                                        icon="sap-icon://document"
                                                        press="onViewEntity">
                                                        <customData>
                                                            <core:CustomData key="entity" value="PurchaseOrders"/>
                                                        </customData>
                                                    </MenuItem>
                                                    <MenuItem
                                                        text="Stock Movements"
                                                        icon="sap-icon://inventory"
                                                        press="onViewEntity">
                                                        <customData>
                                                            <core:CustomData key="entity" value="StockMovements"/>
                                                        </customData>
                                                    </MenuItem>
                                                    <MenuItem
                                                        text="Material Usage Logs"
                                                        icon="sap-icon://bar-chart"
                                                        press="onViewEntity">
                                                        <customData>
                                                            <core:CustomData key="entity" value="MaterialUsageLogs"/>
                                                        </customData>
                                                    </MenuItem>
                                                    <MenuItem
                                                        text="AI Insights"
                                                        icon="sap-icon://lightbulb"
                                                        press="onViewEntity">
                                                        <customData>
                                                            <core:CustomData key="entity" value="AIInsights"/>
                                                        </customData>
                                                    </MenuItem>
                                                </items>
                                            </Menu>
                                        </menu>
                                    </MenuButton>
                                </OverflowToolbar>
                            </headerToolbar>

                            <columns>
                                <Column>
                                    <Text text="PO Number"/>
                                </Column>
                                <Column>
                                    <Text text="Material"/>
                                </Column>
                                <Column>
                                    <Text text="Supplier"/>
                                </Column>
                                <Column>
                                    <Text text="Status"/>
                                </Column>
                                <Column>
                                    <Text text="Total Amount"/>
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem press="onItemPress">
                                    <cells>
                                        <Text text="{orderNumber}"/>
                                        <Text text="{material}"/>
                                        <Text text="{supplier}"/>
                                        <ObjectStatus text="{status}" state="Information"/>
                                        <ObjectNumber
                                            number="{totalAmount}"
                                            unit="{currency_code}"
                                            emphasized="true"/>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </content>
                </Panel>
                
            </VBox>
        </content>
    </Page>
</mvc:View>
